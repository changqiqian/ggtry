{"version":3,"sources":["file:///Users/yamiwang/SY/assets/scripts/base/ResMgr.ts"],"names":["ResMgr","assetManager","PreloadBundle","_bundleName","_loadFinish","loadBundle","_error","_bundle","console","log","PreloadAssetsInBundle","_folders","bundle","GetBundle","i","length","loadDir","GetAssetInBundle","_assetPath","_assetType","load","_asset","ReleaseBundle","releaseAll","removeBundle","getBundle"],"mappings":";;;+BAGaA,M;;;;;;;AAFUC,MAAAA,Y,OAAAA,Y;;;;;;;wBAEVD,M,GAAN,MAAMA,MAAN,CACP;AAC+B,eAAbE,aAAa,CAAEC,WAAF,EAAyBC,WAAzB,EAC3B;AACIH,UAAAA,YAAY,CAACI,UAAb,CAAwBF,WAAxB,EAAoC,CAACG,MAAD,EAAUC,OAAV,KACpC;AACI,gBAAGD,MAAM,IAAI,IAAb,EACA;AACIE,cAAAA,OAAO,CAACC,GAAR,CAAY,mCAAmCN,WAA/C;AACH,aAHD,MAKA;AACI,kBAAGC,WAAH,EACA;AACIA,gBAAAA,WAAW,CAACG,OAAD,CAAX;AACH;AACJ;AACJ,WAbD;AAcH;;AAEkC,eAArBG,qBAAqB,CAACP,WAAD,EAAwBQ,QAAxB,EAAmDP,WAAnD,EACnC;AACI,cAAIQ,MAAM,GAAG,KAAKC,SAAL,CAAeV,WAAf,CAAb;;AAEA,eAAI,IAAIW,CAAC,GAAG,CAAZ,EAAgBA,CAAC,GAAGH,QAAQ,CAACI,MAA7B,EAAsCD,CAAC,EAAvC,EACA;AACIF,YAAAA,MAAM,CAACI,OAAP,CAAeL,QAAQ,CAACG,CAAD,CAAvB,EAA2B,MAC3B;AACI,kBAAGV,WAAH,EACA;AACIA,gBAAAA,WAAW;AACd;AACJ,aAND;AAOH;AACJ;;AAG6B,eAAhBa,gBAAgB,CAACd,WAAD,EAAwBe,UAAxB,EAA8CC,UAA9C,EAA2Df,WAA3D,EAC9B;AACI,cAAIQ,MAAM,GAAG,KAAKC,SAAL,CAAeV,WAAf,CAAb;;AACA,cAAGS,MAAM,IAAI,IAAb,EACA;AACIJ,YAAAA,OAAO,CAACC,GAAR,CAAY,mCAAmCN,WAA/C;AACA,mBAAO,IAAP;AACH;;AAEDS,UAAAA,MAAM,CAACQ,IAAP,CAAYF,UAAZ,EAAuBC,UAAvB,EAAkC,CAACb,MAAD,EAAUe,MAAV,KAClC;AACI,gBAAGf,MAAM,IAAI,IAAb,EACA;AACIE,cAAAA,OAAO,CAACC,GAAR,CAAY,uDAAuDN,WAAvD,GAAqE,GAArE,GAA2Ee,UAAvF;AACH,aAHD,MAKA;AACI,kBAAGd,WAAH,EACA;AACIA,gBAAAA,WAAW,CAACiB,MAAD,CAAX;AACH;AACJ;AACJ,WAbD;AAcH;;AAE0B,eAAbC,aAAa,CAACnB,WAAD,EAC3B;AACI,cAAIS,MAAM,GAAG,KAAKC,SAAL,CAAeV,WAAf,CAAb;;AACA,cAAGS,MAAM,IAAI,IAAb,EACA;AACIJ,YAAAA,OAAO,CAACC,GAAR,CAAY,gCAAgCN,WAA5C;AACA,mBAAO,IAAP;AACH;;AAEDS,UAAAA,MAAM,CAACW,UAAP;AACAtB,UAAAA,YAAY,CAACuB,YAAb,CAA0BZ,MAA1B;AACH;;AAGuB,eAATC,SAAS,CAACV,WAAD,EACxB;AACI,cAAIS,MAAM,GAAGX,YAAY,CAACwB,SAAb,CAAuBtB,WAAvB,CAAb;;AACA,cAAGS,MAAM,IAAE,IAAX,EACA;AACIJ,YAAAA,OAAO,CAACC,GAAR,CAAY,uCAAuCN,WAAnD;AACA,mBAAO,IAAP;AACH;;AAED,iBAAOS,MAAP;AACH;;AArFL,O","sourcesContent":["\nimport { AssetManager, assetManager } from \"cc\";\n\nexport class ResMgr \n{\n    public static PreloadBundle( _bundleName : string , _loadFinish : Function)\n    {\n        assetManager.loadBundle(_bundleName,(_error , _bundle)=>\n        {\n            if(_error != null)\n            {\n                console.log(\"PreloadBundle error   name===:\" + _bundleName);\n            }\n            else\n            {\n                if(_loadFinish)\n                {\n                    _loadFinish(_bundle);\n                }\n            }\n        });\n    }\n\n    public static PreloadAssetsInBundle(_bundleName : string , _folders : Array<string> , _loadFinish : Function)\n    {\n        var bundle = this.GetBundle(_bundleName);\n\n        for(let i = 0 ; i < _folders.length ; i++)\n        {\n            bundle.loadDir(_folders[i],()=>\n            {\n                if(_loadFinish)\n                {\n                    _loadFinish();\n                }\n            });\n        }\n    }\n    \n\n    public static GetAssetInBundle(_bundleName : string , _assetPath : string , _assetType , _loadFinish : Function) : any\n    {\n        var bundle = this.GetBundle(_bundleName);\n        if(bundle == null)\n        {\n            console.log(\"GetAssetInBundle  失败  name===:\" + _bundleName);\n            return null;\n        }\n\n        bundle.load(_assetPath,_assetType,(_error , _asset)=>\n        {\n            if(_error != null)\n            {\n                console.log(\"GetAssetInBundle error   _bundleName:_assetName===\" + _bundleName + \":\" + _assetPath);\n            }\n            else\n            {\n                if(_loadFinish)\n                {\n                    _loadFinish(_asset);\n                }\n            }\n        });\n    }\n\n    public static ReleaseBundle(_bundleName : string)\n    {\n        var bundle = this.GetBundle(_bundleName);\n        if(bundle == null)\n        {\n            console.log(\"ReleaseBundle  失败  name===:\" + _bundleName);\n            return null;\n        }\n\n        bundle.releaseAll();\n        assetManager.removeBundle(bundle);\n    }    \n\n\n    private static GetBundle(_bundleName : string) : AssetManager.Bundle\n    {\n        var bundle = assetManager.getBundle(_bundleName);\n        if(bundle==null)\n        {\n            console.log(\"GetBundle  当前bundle还没有加载  name===:\" + _bundleName);\n            return null;\n        }\n\n        return bundle;\n    }\n}\n\n"]}