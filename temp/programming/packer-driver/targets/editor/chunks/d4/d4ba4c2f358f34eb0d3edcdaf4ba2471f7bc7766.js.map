{"version":3,"sources":["file:///Users/yamiwang/cowboy/assets/scripts/ui/common/ToggleBtn.ts"],"names":["_decorator","Node","Button","Label","Sprite","BaseUI","ccclass","property","ToggleBtn","mTargetParam","mCustmoerData","mDataNotify","mForbidden","InitParam","BindUI","mSelected","node","on","EventType","TOUCH_END","OnSelected","bind","mDisabled","OnDisabled","RegDataNotify","LateInit","UnregDataNotify","RemoveListenerByTarget","CustmoerDestory","off","SetDataNotify","_dataNotify","_targetParam","_custmoerData","AddListener","NotifyCallback","SetTitle","_title","mSelectedLabel","string","mDisableLabel","SetForbidden","_val","interactable","getComponent","grayscale","console","log","SetValueByParamName","_bef","active"],"mappings":"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","sourcesContent":["import { _decorator, Component, Node, Button, Label, Sprite } from 'cc';\nimport { BaseUI } from '../../base/BaseUI';\nimport { DataNotify } from '../../base/DataNotify';\nconst { ccclass, property } = _decorator;\n\n@ccclass('ToggleBtn')\nexport class ToggleBtn extends BaseUI {\n\n    @property(Button) \n    mSelected: Button = null;\n    @property(Label) \n    mSelectedLabel: Label = null;\n    @property(Button) \n    mDisabled: Button = null;\n    @property(Label) \n    mDisableLabel: Label = null;\n\n    mTargetParam : string;\n    mCustmoerData:number = 0;\n    mDataNotify : DataNotify = null;\n    mForbidden : boolean = false;\n    InitParam() \n    {\n\n    }\n    BindUI() \n    {\n        this.mSelected.node.on(Node.EventType.TOUCH_END,this.OnSelected.bind(this),this);\n        this.mDisabled.node.on(Node.EventType.TOUCH_END,this.OnDisabled.bind(this),this);\n    }\n    RegDataNotify() \n    {\n\n    }\n    LateInit() \n    {\n\n    }\n    UnregDataNotify() \n    {\n        if(this.mDataNotify != null)\n        {\n            this.mDataNotify.RemoveListenerByTarget(this);\n        }\n    }\n    CustmoerDestory() \n    {\n        this.mSelected.node.off(Node.EventType.TOUCH_END,this.OnSelected.bind(this),this);\n        this.mDisabled.node.off(Node.EventType.TOUCH_END,this.OnDisabled.bind(this),this);\n        this.mDataNotify = null;\n    }\n\n    public SetDataNotify(_dataNotify : DataNotify ,_targetParam : string , _custmoerData : number)\n    {\n        this.mDataNotify = _dataNotify;\n        this.mCustmoerData = _custmoerData;\n        this.mTargetParam = _targetParam;\n        this.mDataNotify.AddListener(this.mTargetParam , this.NotifyCallback.bind(this), this);\n    }\n\n    public SetTitle(_title :string)\n    {\n        this.mSelectedLabel.string = _title;\n        this.mDisableLabel.string = _title;\n    }\n\n    public SetForbidden(_val : boolean)\n    {\n        this.mForbidden = _val;\n        this.mSelected.interactable = !this.mForbidden;\n        this.mDisabled.interactable = !this.mForbidden;\n        this.mSelected.getComponent(Sprite).grayscale = this.mForbidden;\n        this.mDisabled.getComponent(Sprite).grayscale = this.mForbidden;\n    }\n\n    OnSelected()\n    {\n        \n    }\n\n    OnDisabled()\n    {\n        if(this.mForbidden)\n        {\n            return;\n        }\n\n        if(this.mDataNotify == null)\n        {\n            return;\n        }\n        console.log(\"OnDisabled\");\n        this.mDataNotify.SetValueByParamName(this.mTargetParam , this.mCustmoerData);\n    }\n\n    NotifyCallback(_val , _bef)\n    {\n        if(_val == this.mCustmoerData)\n        {\n            this.mSelected.node.active = true;\n            this.mDisabled.node.active = false;\n        }\n        else\n        {\n            this.mSelected.node.active = false;\n            this.mDisabled.node.active = true;\n        }\n    }\n\n}\n\n"]}