{"version":3,"sources":["file:///Users/yamiwang/SY/assets/scripts/base/ResMgr.ts"],"names":["ResMgr","assetManager","PreloadBundle","_bundleName","_loadFinish","loadBundle","_error","_bundle","console","log","PreloadAssetsInBundle","_folders","i","length","loadDir","GetAssetInBundle","_assetPath","_assetType","bundle","GetBundle","load","_asset","ReleaseBundle","releaseAll","removeBundle","getBundle"],"mappings":";;;+BAGaA,M;;;;;;;AAFUC,MAAAA,Y,OAAAA,Y;;;;;;;wBAEVD,M,GAAN,MAAMA,MAAN,CACP;AAC+B,eAAbE,aAAa,CAAEC,WAAF,EAAyBC,WAAzB,EAC3B;AACIH,UAAAA,YAAY,CAACI,UAAb,CAAwBF,WAAxB,EAAoC,CAACG,MAAD,EAAUC,OAAV,KACpC;AACI,gBAAGD,MAAM,IAAI,IAAb,EACA;AACIE,cAAAA,OAAO,CAACC,GAAR,CAAY,mCAAmCN,WAA/C;AACH,aAHD,MAKA;AACI,kBAAGC,WAAH,EACA;AACIA,gBAAAA,WAAW,CAACG,OAAD,CAAX;AACH;AACJ;AACJ,WAbD;AAcH;;AAEkC,eAArBG,qBAAqB,CAACH,OAAD,EAAiCI,QAAjC,EAA4DP,WAA5D,EACnC;AACI,eAAI,IAAIQ,CAAC,GAAG,CAAZ,EAAgBA,CAAC,GAAGD,QAAQ,CAACE,MAA7B,EAAsCD,CAAC,EAAvC,EACA;AACIL,YAAAA,OAAO,CAACO,OAAR,CAAgBH,QAAQ,CAACC,CAAD,CAAxB,EAA4B,MAC5B;AACI,kBAAGR,WAAH,EACA;AACIA,gBAAAA,WAAW;AACd;AACJ,aAND;AAOH;AACJ;;AAG6B,eAAhBW,gBAAgB,CAACZ,WAAD,EAAwBa,UAAxB,EAA8CC,UAA9C,EAA2Db,WAA3D,EAC9B;AACI,cAAIc,MAAM,GAAG,KAAKC,SAAL,CAAehB,WAAf,CAAb;;AACA,cAAGe,MAAM,IAAI,IAAb,EACA;AACIV,YAAAA,OAAO,CAACC,GAAR,CAAY,mCAAmCN,WAA/C;AACA,mBAAO,IAAP;AACH;;AAEDe,UAAAA,MAAM,CAACE,IAAP,CAAYJ,UAAZ,EAAuBC,UAAvB,EAAkC,CAACX,MAAD,EAAUe,MAAV,KAClC;AACI,gBAAGf,MAAM,IAAI,IAAb,EACA;AACIE,cAAAA,OAAO,CAACC,GAAR,CAAY,uDAAuDN,WAAvD,GAAqE,GAArE,GAA2Ea,UAAvF;AACH,aAHD,MAKA;AACI,kBAAGZ,WAAH,EACA;AACIA,gBAAAA,WAAW,CAACiB,MAAD,CAAX;AACH;AACJ;AACJ,WAbD;AAcH;;AAE0B,eAAbC,aAAa,CAACnB,WAAD,EAC3B;AACI,cAAIe,MAAM,GAAG,KAAKC,SAAL,CAAehB,WAAf,CAAb;;AACA,cAAGe,MAAM,IAAI,IAAb,EACA;AACIV,YAAAA,OAAO,CAACC,GAAR,CAAY,gCAAgCN,WAA5C;AACA,mBAAO,IAAP;AACH;;AAEDe,UAAAA,MAAM,CAACK,UAAP;AACAtB,UAAAA,YAAY,CAACuB,YAAb,CAA0BN,MAA1B;AACH;;AAGuB,eAATC,SAAS,CAAChB,WAAD,EACxB;AACI,cAAIe,MAAM,GAAGjB,YAAY,CAACwB,SAAb,CAAuBtB,WAAvB,CAAb;;AACA,cAAGe,MAAM,IAAE,IAAX,EACA;AACIV,YAAAA,OAAO,CAACC,GAAR,CAAY,uCAAuCN,WAAnD;AACA,mBAAO,IAAP;AACH;;AAED,iBAAOe,MAAP;AACH;;AAnFL,O","sourcesContent":["\nimport { AssetManager, assetManager } from \"cc\";\n\nexport class ResMgr \n{\n    public static PreloadBundle( _bundleName : string , _loadFinish : Function)\n    {\n        assetManager.loadBundle(_bundleName,(_error , _bundle)=>\n        {\n            if(_error != null)\n            {\n                console.log(\"PreloadBundle error   name===:\" + _bundleName);\n            }\n            else\n            {\n                if(_loadFinish)\n                {\n                    _loadFinish(_bundle);\n                }\n            }\n        });\n    }\n\n    public static PreloadAssetsInBundle(_bundle : AssetManager.Bundle , _folders : Array<string> , _loadFinish : Function)\n    {\n        for(let i = 0 ; i < _folders.length ; i++)\n        {\n            _bundle.loadDir(_folders[i],()=>\n            {\n                if(_loadFinish)\n                {\n                    _loadFinish();\n                }\n            });\n        }\n    }\n    \n\n    public static GetAssetInBundle(_bundleName : string , _assetPath : string , _assetType , _loadFinish : Function) : any\n    {\n        var bundle = this.GetBundle(_bundleName);\n        if(bundle == null)\n        {\n            console.log(\"GetAssetInBundle  失败  name===:\" + _bundleName);\n            return null;\n        }\n\n        bundle.load(_assetPath,_assetType,(_error , _asset)=>\n        {\n            if(_error != null)\n            {\n                console.log(\"GetAssetInBundle error   _bundleName:_assetName===\" + _bundleName + \":\" + _assetPath);\n            }\n            else\n            {\n                if(_loadFinish)\n                {\n                    _loadFinish(_asset);\n                }\n            }\n        });\n    }\n\n    public static ReleaseBundle(_bundleName : string)\n    {\n        var bundle = this.GetBundle(_bundleName);\n        if(bundle == null)\n        {\n            console.log(\"ReleaseBundle  失败  name===:\" + _bundleName);\n            return null;\n        }\n\n        bundle.releaseAll();\n        assetManager.removeBundle(bundle);\n    }    \n\n\n    private static GetBundle(_bundleName : string) : AssetManager.Bundle\n    {\n        var bundle = assetManager.getBundle(_bundleName);\n        if(bundle==null)\n        {\n            console.log(\"GetBundle  当前bundle还没有加载  name===:\" + _bundleName);\n            return null;\n        }\n\n        return bundle;\n    }\n}\n\n"]}