{"version":3,"sources":["file:///Users/yamiwang/SY/assets/scripts/base/ResMgr.ts"],"names":["ResMgr","assetManager","PreloadBundle","_bundleName","_loadFinish","loadBundle","_error","_bundle","console","log","GetAssetInBundle","_assetPath","_assetType","bundle","GetBundle","load","_asset","ReleaseBundle","releaseAll","removeBundle","getBundle"],"mappings":";;;+BAGaA,M;;;;;;;AAFUC,MAAAA,Y,OAAAA,Y;;;;;;;wBAEVD,M,GAAN,MAAMA,MAAN,CACP;AACI;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAG2B,eAAbE,aAAa,CAAEC,WAAF,EAAyBC,WAAzB,EAC3B;AACIH,UAAAA,YAAY,CAACI,UAAb,CAAwBF,WAAxB,EAAoC,CAACG,MAAD,EAAUC,OAAV,KACpC;AACI,gBAAGD,MAAM,IAAI,IAAb,EACA;AACIE,cAAAA,OAAO,CAACC,GAAR,CAAY,mCAAmCN,WAA/C;AACH,aAHD,MAKA;AACI,kBAAGC,WAAH,EACA;AACIA,gBAAAA,WAAW;AACd;AACJ;AACJ,WAbD;AAcH;;AAG6B,eAAhBM,gBAAgB,CAACP,WAAD,EAAwBQ,UAAxB,EAA8CC,UAA9C,EAA2DR,WAA3D,EAC9B;AACI,cAAIS,MAAM,GAAG,KAAKC,SAAL,CAAeX,WAAf,CAAb;;AACA,cAAGU,MAAM,IAAI,IAAb,EACA;AACIL,YAAAA,OAAO,CAACC,GAAR,CAAY,mCAAmCN,WAA/C;AACA,mBAAO,IAAP;AACH;;AAEDU,UAAAA,MAAM,CAACE,IAAP,CAAYJ,UAAZ,EAAuBC,UAAvB,EAAkC,CAACN,MAAD,EAAUU,MAAV,KAClC;AACI,gBAAGV,MAAM,IAAI,IAAb,EACA;AACIE,cAAAA,OAAO,CAACC,GAAR,CAAY,uDAAuDN,WAAvD,GAAqE,GAArE,GAA2EQ,UAAvF;AACH,aAHD,MAKA;AACI,kBAAGP,WAAH,EACA;AACIA,gBAAAA,WAAW,CAACY,MAAD,CAAX;AACH;AACJ;AACJ,WAbD;AAcH;;AAE0B,eAAbC,aAAa,CAACd,WAAD,EAC3B;AACI,cAAIU,MAAM,GAAG,KAAKC,SAAL,CAAeX,WAAf,CAAb;;AACA,cAAGU,MAAM,IAAI,IAAb,EACA;AACIL,YAAAA,OAAO,CAACC,GAAR,CAAY,gCAAgCN,WAA5C;AACA,mBAAO,IAAP;AACH;;AAEDU,UAAAA,MAAM,CAACK,UAAP;AACAjB,UAAAA,YAAY,CAACkB,YAAb,CAA0BN,MAA1B;AACH;;AAGuB,eAATC,SAAS,CAACX,WAAD,EACxB;AACI,cAAIU,MAAM,GAAGZ,YAAY,CAACmB,SAAb,CAAuBjB,WAAvB,CAAb;;AACA,cAAGU,MAAM,IAAE,IAAX,EACA;AACIL,YAAAA,OAAO,CAACC,GAAR,CAAY,uCAAuCN,WAAnD;AACA,mBAAO,IAAP;AACH;;AAED,iBAAOU,MAAP;AACH;;AAhFL,O","sourcesContent":["\nimport { AssetManager, assetManager } from \"cc\";\n\nexport class ResMgr \n{\n    // private static instance : ResMgr = null;\n    // public static GetInstance() :ResMgr\n    // {\n    //     if(ResMgr.instance == null)\n    //     {\n    //         ResMgr.instance = new ResMgr();\n    //     }\n    //     return ResMgr.instance;\n    // }\n\n\n    public static PreloadBundle( _bundleName : string , _loadFinish : Function)\n    {\n        assetManager.loadBundle(_bundleName,(_error , _bundle)=>\n        {\n            if(_error != null)\n            {\n                console.log(\"PreloadBundle error   name===:\" + _bundleName);\n            }\n            else\n            {\n                if(_loadFinish)\n                {\n                    _loadFinish();\n                }\n            }\n        });\n    }\n    \n\n    public static GetAssetInBundle(_bundleName : string , _assetPath : string , _assetType , _loadFinish : Function) : any\n    {\n        var bundle = this.GetBundle(_bundleName);\n        if(bundle == null)\n        {\n            console.log(\"GetAssetInBundle  失败  name===:\" + _bundleName);\n            return null;\n        }\n\n        bundle.load(_assetPath,_assetType,(_error , _asset)=>\n        {\n            if(_error != null)\n            {\n                console.log(\"GetAssetInBundle error   _bundleName:_assetName===\" + _bundleName + \":\" + _assetPath);\n            }\n            else\n            {\n                if(_loadFinish)\n                {\n                    _loadFinish(_asset);\n                }\n            }\n        });\n    }\n\n    public static ReleaseBundle(_bundleName : string)\n    {\n        var bundle = this.GetBundle(_bundleName);\n        if(bundle == null)\n        {\n            console.log(\"ReleaseBundle  失败  name===:\" + _bundleName);\n            return null;\n        }\n\n        bundle.releaseAll();\n        assetManager.removeBundle(bundle);\n    }    \n\n\n    private static GetBundle(_bundleName : string) : any\n    {\n        var bundle = assetManager.getBundle(_bundleName);\n        if(bundle==null)\n        {\n            console.log(\"GetBundle  当前bundle还没有加载  name===:\" + _bundleName);\n            return null;\n        }\n\n        return bundle;\n    }\n}\n\n"]}