{"version":3,"sources":["file:///Users/yamiwang/cowboy/assets/scripts/ui/common/ToggleBtn.ts"],"names":["_decorator","Node","Button","Label","BaseUI","ccclass","property","ToggleBtn","mTargetParam","mCustmoerData","mDataNotify","mForbidden","InitParam","BindUI","mSelected","node","on","EventType","TOUCH_END","OnSelected","bind","mDisabled","OnDisabled","RegDataNotify","LateInit","UnregDataNotify","CustmoerDestory","RemoveListenerByTarget","SetDataNotify","_dataNotify","_targetParam","_custmoerData","AddListener","NotifyCallback","SetTitle","_title","mSelectedLabel","string","mDisableLabel","SetForbidden","_val","interactable","console","log","SetValueByParamName","_bef","active"],"mappings":"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","sourcesContent":["import { _decorator, Component, Node, Button, Label } from 'cc';\nimport { BaseUI } from '../../base/BaseUI';\nimport { DataNotify } from '../../base/DataNotify';\nconst { ccclass, property } = _decorator;\n\n@ccclass('ToggleBtn')\nexport class ToggleBtn extends BaseUI {\n\n    @property(Button) \n    mSelected: Button = null;\n    @property(Label) \n    mSelectedLabel: Label = null;\n    @property(Button) \n    mDisabled: Button = null;\n    @property(Label) \n    mDisableLabel: Label = null;\n\n    mTargetParam : string;\n    mCustmoerData:number = 0;\n    mDataNotify : DataNotify = null;\n    mForbidden : boolean = false;\n    InitParam() \n    {\n\n    }\n    BindUI() \n    {\n        this.mSelected.node.on(Node.EventType.TOUCH_END,this.OnSelected.bind(this),this);\n        this.mDisabled.node.on(Node.EventType.TOUCH_END,this.OnDisabled.bind(this),this);\n    }\n    RegDataNotify() \n    {\n\n    }\n    LateInit() \n    {\n\n    }\n    UnregDataNotify() \n    {\n\n    }\n    CustmoerDestory() \n    {\n        if(this.mDataNotify != null)\n        {\n            this.mDataNotify.RemoveListenerByTarget(this);\n        }\n    }\n\n    public SetDataNotify(_dataNotify : DataNotify ,_targetParam : string , _custmoerData : number)\n    {\n        this.mDataNotify = _dataNotify;\n        this.mCustmoerData = _custmoerData;\n        this.mTargetParam = _targetParam;\n        this.mDataNotify.AddListener(this.mTargetParam , this.NotifyCallback.bind(this), this);\n    }\n\n    public SetTitle(_title :string)\n    {\n        this.mSelectedLabel.string = _title;\n        this.mDisableLabel.string = _title;\n    }\n\n    public SetForbidden(_val : boolean)\n    {\n        this.mForbidden = _val;\n\n        this.mSelected.interactable = !this.mForbidden;\n        this.mDisabled.interactable = !this.mForbidden;\n    }\n\n    OnSelected()\n    {\n        console.log(\"OnSelected\");\n    }\n\n    OnDisabled()\n    {\n        if(this.mForbidden)\n        {\n            return;\n        }\n\n        if(this.mDataNotify == null)\n        {\n            return;\n        }\n        console.log(\"OnDisabled\");\n        this.mDataNotify.SetValueByParamName(this.mTargetParam , this.mCustmoerData);\n    }\n\n    NotifyCallback(_val , _bef)\n    {\n        if(_val == this.mCustmoerData)\n        {\n            this.mSelected.node.active = true;\n            this.mDisabled.node.active = false;\n        }\n        else\n        {\n            this.mSelected.node.active = false;\n            this.mDisabled.node.active = true;\n        }\n    }\n\n}\n\n"]}